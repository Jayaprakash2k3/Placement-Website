{% load static %}

<!DOCTYPE html>
<html lang="en">
{% include "others/head.html" %}

<body>
    {% include "module/header.html" %}
    <main class="main">
        <section class="section-box-2">
            <div class="container">
                <div class="banner-hero banner-image-single"><img src="{{user.bannerUrl}}"><a class="btn-editor"
                        href="#"></a>
                </div>
                <div class="box-company-profile">
                    <div class="image-compay"><img style="height: 100px;" src="{{user.profileUrl}}">
                    </div>
                    <div class="row mt-10">
                        <div class="col-lg-8 col-md-12">
                            <h5 class="f-18">{{user}}<span class="card-location font-regular ml-20">Coimbatore,
                                    Tamil Nadu </span>
                            </h5>
                            <p class="mt-0 font-md color-text-paragraph-2 mb-15">{{user.year}}th Year
                                {{user.department}}'{{user.batch}}</p>
                        </div>
                        <div class="col-lg-4 col-md-12 text-lg-end"><a
                                class="btn btn-preview-icon btn-apply btn-apply-big" href="EditProfile">Edit</a></div>
                    </div>
                </div>
                <div class="border-bottom pt-10 pb-10"></div>
            </div>
        </section>
        <section class="section-box mt-50">
            <div class="container">
                <div class="row">
                    <div class="col-lg-3 col-md-4 col-sm-12">
                        <div class="box-nav-tabs nav-tavs-profile mb-5">
                            <ul class="nav" role="tablist">
                                <li><a class="btn btn-border aboutus-icon mb-20 active" href="#tab-my-profile"
                                        data-bs-toggle="tab" role="tab" aria-controls="tab-my-profile"
                                        aria-selected="true">My Profile</a></li>
                                <li><a class="btn btn-border recruitment-icon mb-20" href="#tab-my-jobs"
                                        data-bs-toggle="tab" role="tab" aria-controls="tab-my-jobs"
                                        aria-selected="false">My Education</a></li>
                                <li><a class="btn btn-border people-icon mb-20" href="#tab-saved-jobs"
                                        data-bs-toggle="tab" role="tab" aria-controls="tab-saved-jobs"
                                        aria-selected="false">Others</a></li>
                            </ul>
                            <div class="border-bottom pt-10 pb-10"></div>

                        </div>
                    </div>
                    <div class="col-lg-9 col-md-8 col-sm-12 col-12 mb-50">
                        <div class="content-single">
                            <div class="tab-content">
                                <div class="tab-pane fade show active" id="tab-my-profile" role="tabpanel"
                                    aria-labelledby="tab-my-profile">
                                    <form id="profile-form" method="post">
                                        {% csrf_token %}
                                        <h3 class="mt-0 mb-15 color-brand-1">My Account</h3><a
                                            class="font-md color-text-paragraph-2" href="#">Update your profile</a>

                                        <div class="row form-contact">
                                            <div class="col-lg-6 col-md-12">
                                                <div class="form-group">
                                                    <label class="font-sm color-text-mutted mb-10">First Name *</label>
                                                    <input class="form-control" type="text" name="first_name"
                                                        value="{{user.first_name}}" readonly>
                                                </div>

                                                <div class="form-group">
                                                    <label class="font-sm color-text-mutted mb-10">Email *</label>
                                                    <input class="form-control" type="text" name="email"
                                                        value="{{user.email}}" readonly>
                                                </div>

                                                <div class="form-group">
                                                    <label class="font-sm color-text-mutted mb-10">Contact
                                                        number</label>
                                                    <input class="form-control" type="text" name="phone_number"
                                                        value="{{user.phone_number}}" readonly>
                                                </div>

                                                <div class="form-group">
                                                    <label class="font-sm color-text-mutted mb-10">Address</label>
                                                    <textarea class="form-control" rows="4" name="address"
                                                        readonly>{{user.address}}</textarea>
                                                </div>

                                                <div class="form-group">
                                                    <label class="font-sm color-text-mutted mb-10">DOB</label>
                                                    <input class="form-control" type="date" name="dob" value="{{dob}}"
                                                        readonly>
                                                </div>

                                            </div>
                                            <div class="col-lg-6 col-md-12">

                                                <div class="form-group">
                                                    <label class="font-sm color-text-mutted mb-10">Last Name *</label>
                                                    <input class="form-control" type="text" name="last_name"
                                                        value="{{user.last_name}}" readonly>
                                                </div>


                                                <div class="form-group">
                                                    <label class="font-sm color-text-mutted mb-10">GCT Mail *</label>
                                                    <input class="form-control" type="text" name="gctmail"
                                                        value="{{user.gctmail}}" readonly>
                                                </div>

                                                <div class="form-group">
                                                    <label class="font-sm color-text-mutted mb-10">Gender</label>
                                                    <input class="form-control" type="text" name="gender"
                                                        value="{{user.gender}}" readonly>
                                                </div>

                                                <div class="form-group">
                                                    <label class="font-sm color-text-mutted mb-10">City</label>
                                                    <input class="form-control" type="text" name="city"
                                                        value="{{user.city}}" readonly>
                                                </div>

                                                <div class="form-group">
                                                    <label class="font-sm color-text-mutted mb-10">Aadhar Number</label>
                                                    <input class="form-control" type="text" name="aadhar"
                                                        value="{{user.aadhar}}" readonly>
                                                </div>
                                            </div>
                                            <div class="border-bottom pt-10 pb-10"></div>

                                        </div>
                                    </form>
                                </div>
                                <div class="tab-pane fade" id="tab-my-jobs" role="tabpanel"
                                    aria-labelledby="tab-my-jobs">
                                    <form id="education-form" method="post">
                                        {% csrf_token %}
                                        <h3 class="mt-0 color-brand-1 mb-50">My Education</h3>
                                        <div class="row form-contact">
                                            <div class="col-lg-6 col-md-12">
                                                <div class="form-group">
                                                    <label class="font-sm color-text-muted mb-10">Batch *</label>
                                                    <input class="form-control" type="text" name="batch"
                                                        value="{{user.batch}}" readonly>
                                                </div>

                                                <div class="form-group">
                                                    <label class="font-sm color-text-muted mb-10">Roll Number *</label>
                                                    <input class="form-control" type="text" name="rollnum"
                                                        value="{{user.rollnum}}" readonly>
                                                </div>

                                                <div class="form-group">
                                                    <label class="font-sm color-text-muted mb-10">Year</label>
                                                    <input class="form-control" type="text" name="year"
                                                        value="{{user.year}}" readonly>
                                                </div>

                                            </div>
                                            <div class="col-lg-6 col-md-12">
                                                <div class="form-group">
                                                    <label class="font-sm color-text-muted mb-10">SSLC *</label>
                                                    <input class="form-control" type="text" name="SSLC"
                                                        value="{{user.SSLC}}" readonly>
                                                </div>

                                                <div class="form-group">
                                                    <label class="font-sm color-text-muted mb-10">HSC *</label>
                                                    <input class="form-control" type="text" name="HSC"
                                                        value="{{user.HSC}}" readonly>
                                                </div>
                                                <div class="form-group">
                                                    <label class="font-sm color-text-muted mb-10">CGPA</label>
                                                    <input class="form-control" type="text" name="cgpa"
                                                        value="{{user.cgpa}}" readonly>
                                                </div>

                                                <div class="form-group">
                                                    <label class="font-sm color-text-muted mb-10">Resume</label>
                                                    <input class="form-control" type="url" name="resume"
                                                        value="{{user.resume}}" readonly>
                                                </div>
                                            </div>
                                            <div class="border-bottom pt-10 pb-10"></div>


                                        </div>
                                    </form>
                                </div>

                                <div class="tab-pane fade" id="tab-saved-jobs" role="tabpanel"
                                    aria-labelledby="tab-saved-jobs">
                                    <h3 class="mt-0 color-brand-1 mb-50">Others</h3>
                                    <div class="form-group">
                                        <label class="font-sm color-text-mutted mb-10">Profile URL</label>
                                        <textarea class="form-control" rows="7" readonly>{{user.profileUrl}}</textarea>
                                    </div>
                                    <div class="form-group">
                                        <label class="font-sm color-text-mutted mb-10">Banner Url</label>
                                        <textarea class="form-control" rows="7" readonly>{{user.bannerUrl}}</textarea>
                                    </div>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    </main>
    {% include "others/foot.html" %}
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script> <!-- Make sure to include jQuery -->

    <script>
        $(document).ready(function () {
            // Handle form submission when "Save Changes" button is clicked
            $("#save-changes-button").click(function (event) {
                event.preventDefault(); // Prevent the default form submission behavior

                // Get the form data
                var formData = new FormData($("#profile-form")[0]); // Using FormData to collect form data

                // Send an AJAX request to the Django view
                $.ajax({
                    type: "POST",
                    url: "/update-profile/", // URL to your Django view
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        // Handle success, e.g., show a success message
                        alert("Profile updated successfully!");
                    },
                    error: function (error) {
                        // Handle error, e.g., display an error message
                        alert("Error updating profile.");
                    }
                });
            });
        });

        $(document).ready(function () {
            // Handle form submission when "Save All Changes" button is clicked
            $("#save-education-changes").click(function (event) {
                event.preventDefault(); // Prevent the default form submission behavior

                // Get the form data
                var formData = new FormData($("#education-form")[0]); // Using FormData to collect form data

                // Send an AJAX request to the Django view for education information
                $.ajax({
                    type: "POST",
                    url: "/education-update/", // URL to your Django view for education information
                    data: formData,
                    processData: false,
                    contentType: false,
                    success: function (data) {
                        // Handle success, e.g., show a success message
                        alert("Education information updated successfully!");
                    },
                    error: function (error) {
                        // Handle error, e.g., display an error message
                        alert("Error updating education information.");
                    }
                });
            });
        });
    </script>

</body>

</html>